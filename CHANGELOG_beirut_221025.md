# Zmiany w projekcie Beirut Bar - 21-22.10.2025

## üéØ Cel zmian
1. Naprawienie migania obrazka zaslepki w stronach HTML
2. Naprawienie bia≈Çej przerwy i przesuniƒôcia na Firefox Mobile (Android)

---

## üìù ZMIANY RƒòCZNE (do skopiowania do drugiego projektu)

### 1. **css/style.css**

#### A) Usuniƒôcie `position: fixed` z body (linia ~26-33)
```css
/* BY≈ÅO: */
html, body {
    height: 100%;
    overflow: hidden;
    position: fixed;  /* ‚ùå USU≈É TO */
    width: 100%;
    touch-action: none;
    margin: 0;
    padding: 0;
}

/* JEST: */
html, body {
    height: 100%;
    overflow: hidden;
    width: 100%;
    touch-action: none;
    margin: 0;
    padding: 0;
}
```

#### B) Baner reklamowy - viewport fix (linia ~79-95)
```css
/* BY≈ÅO: */
.ad-banner {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 15vh;
    min-height: 100px;  /* ‚ùå USU≈É */
    background-color: #ffffff;
    ...
}

/* JEST: */
.ad-banner {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 15vh; /* Fallback dla starych przeglƒÖdarek */
    height: 15dvh; /* Dynamic viewport height (nowoczesne) */
    height: calc(var(--vh, 1vh) * 15); /* JS fallback - MUSI BYƒÜ OSTATNI */
    background-color: #ffffff;
    ...
}
```

#### C) Link banera - usu≈Ñ min-height (linia ~97-104)
```css
/* BY≈ÅO: */
.ad-banner-link {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    min-height: 100px;  /* ‚ùå USU≈É */
    text-decoration: none;
}

/* JEST: */
.ad-banner-link {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    text-decoration: none;
}
```

#### D) Obrazek banera - wymuszenie wysoko≈õci (linia ~106-117)
```css
/* BY≈ÅO: */
.ad-banner-image {
    max-width: 100%;
    max-height: 15vh;
    width: auto;
    height: auto;
    object-fit: contain;
    ...
}

/* JEST: */
.ad-banner-image {
    max-width: 100%;
    width: auto;
    height: 15vh; /* Fallback dla starych przeglƒÖdarek */
    height: 15dvh; /* Dynamic viewport height (nowoczesne) */
    height: calc(var(--vh, 1vh) * 15); /* JS fallback - MUSI BYƒÜ OSTATNI */
    object-fit: contain;
    ...
}
```

#### E) Modal dla podstron - viewport fix (linia ~127-142)
```css
/* BY≈ÅO: */
.page-modal {
    display: none;
    position: fixed;
    top: 15vh;
    left: 0;
    width: 100%;
    height: 85vh;
    ...
}

/* JEST: */
.page-modal {
    display: none;
    position: fixed;
    top: 15vh; /* Fallback dla starych przeglƒÖdarek */
    top: 15dvh; /* Dynamic viewport height (nowoczesne) */
    top: calc(var(--vh, 1vh) * 15); /* JS fallback - MUSI BYƒÜ OSTATNI */
    left: 0;
    width: 100%;
    height: 85vh; /* Fallback dla starych przeglƒÖdarek */
    height: 85dvh; /* Dynamic viewport height (nowoczesne) */
    height: calc(var(--vh, 1vh) * 85); /* JS fallback - MUSI BYƒÜ OSTATNI */
    ...
}
```

#### F) Menu Viewer - viewport fix (linia ~188-201)
```css
/* BY≈ÅO: */
.menu-viewer {
    position: fixed;
    top: 15vh;
    left: 0;
    width: 100%;
    height: 85vh;
    ...
}

/* JEST: */
.menu-viewer {
    position: fixed;
    top: 15vh; /* Fallback dla starych przeglƒÖdarek */
    top: 15dvh; /* Dynamic viewport height (nowoczesne) */
    top: calc(var(--vh, 1vh) * 15); /* JS fallback - MUSI BYƒÜ OSTATNI */
    left: 0;
    width: 100%;
    height: 85vh; /* Fallback dla starych przeglƒÖdarek */
    height: 85dvh; /* Dynamic viewport height (nowoczesne) */
    height: calc(var(--vh, 1vh) * 85); /* JS fallback - MUSI BYƒÜ OSTATNI */
    ...
}
```

#### G) Komentarz na poczƒÖtku pliku (linia 1-5)
```css
/* DODAJ NA POCZƒÑTKU: */
/* Mobile Viewport Fix
 * U≈ºywamy dvh (dynamic viewport height) zamiast vh
 * dvh automatycznie uwzglƒôdnia dynamiczne paski adresu na mobile
 * Fallback na vh dla starszych przeglƒÖdarek
 */
```

---

### 2. **js/main_simple.js**

#### Dodaj NA POCZƒÑTKU pliku (przed wszystkim):
```javascript
// Fix dla viewport height na mobile (fallback dla dvh)
function setRealViewportHeight() {
    // U≈ºyj visualViewport je≈õli dostƒôpne (lepsze dla mobile)
    const height = window.visualViewport ? window.visualViewport.height : window.innerHeight;
    const vh = height * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
    console.log('üîß Viewport fix:', {
        visualViewport: window.visualViewport ? window.visualViewport.height : 'not supported',
        innerHeight: window.innerHeight,
        usedHeight: height,
        vh: vh,
        vhPx: `${vh}px`,
        banner15vh: vh * 15,
        viewer85vh: vh * 85
    });
}

// Ustaw przy za≈Çadowaniu i przy zmianie orientacji/rozmiaru
setRealViewportHeight();
window.addEventListener('resize', setRealViewportHeight);
window.addEventListener('orientationchange', setRealViewportHeight);
window.addEventListener('scroll', setRealViewportHeight); // Firefox fix

// Dodatkowe nas≈Çuchiwanie dla visualViewport
if (window.visualViewport) {
    window.visualViewport.addEventListener('resize', setRealViewportHeight);
    window.visualViewport.addEventListener('scroll', setRealViewportHeight);
}

// Wymuszenie update po 500ms (gdy pasek adresu siƒô schowa)
setTimeout(setRealViewportHeight, 500);
```

---

### 3. **index.html** (OPCJONALNIE - tylko do debugowania)

#### Dodaj Eruda console w `<head>` (usu≈Ñ po debugowaniu):
```html
<!-- Eruda - Mobile Console (usu≈Ñ po debugowaniu) -->
<script src="https://cdn.jsdelivr.net/npm/eruda"></script>
<script>eruda.init();</script>
```

---

### 4. **save_pages.py**

#### Zmie≈Ñ aby NIE nadpisywaƒá istniejƒÖcych plik√≥w:
```python
# BY≈ÅO (linia ~20-25):
saved_files = []
for page in data['pages']:
    filename = os.path.join(pages_dir, page['filename'])
    with open(filename, 'w', encoding='utf-8') as f:
        f.write(page['content'])
    saved_files.append(page['filename'])

# JEST:
saved_files = []
skipped_files = []
for page in data['pages']:
    filename = os.path.join(pages_dir, page['filename'])
    if os.path.exists(filename):
        skipped_files.append(page['filename'])
        continue
    with open(filename, 'w', encoding='utf-8') as f:
        f.write(page['content'])
    saved_files.append(page['filename'])
```

#### Dodaj info o pominiƒôtych plikach w response (linia ~36-39):
```python
# BY≈ÅO:
response = {
    'success': True,
    'saved': saved_files,
    'count': len(saved_files)
}

# JEST:
response = {
    'success': True,
    'saved': saved_files,
    'count': len(saved_files),
    'skipped': skipped_files,
    'skipped_count': len(skipped_files)
}
```

---

### 5. **hotspot-editor-food.html**

#### Zaktualizuj komunikat o zapisanych plikach (linia ~504-516):
```javascript
// BY≈ÅO:
if (result.success) {
    alert(`‚úÖ Zapisano ${result.count} plik√≥w w folderze pages/:\n${result.saved.join('\n')}`);
}

// JEST:
if (result.success) {
    let message = `‚úÖ Zapisano ${result.count} nowych plik√≥w w folderze pages/`;
    if (result.saved.length > 0) {
        message += `:\n${result.saved.join('\n')}`;
    }
    if (result.skipped_count > 0) {
        message += `\n\n‚ö†Ô∏è Pominiƒôto ${result.skipped_count} istniejƒÖcych plik√≥w:\n${result.skipped.join('\n')}`;
    }
    alert(message);
}
```

---

## üìä GOOGLE ANALYTICS (22.10.2025)

### Dodano tracking Google Analytics do wszystkich podstron

**Tracking ID:** `G-GCL42G0L6D`

#### Skrypt: **add_analytics.py**
```python
#!/usr/bin/env python3
"""
Skrypt dodaje Google Analytics do wszystkich plik√≥w HTML w folderze pages/
"""
```

**Co robi:**
- Dodaje kod Google Analytics (gtag.js) do wszystkich plik√≥w HTML w `pages/`
- Wstawia kod po tagu `</title>` w sekcji `<head>`
- Sprawdza czy plik ju≈º ma Analytics (pomija duplikaty)
- Przetwarza automatycznie wszystkie 77 plik√≥w HTML

**Kod Analytics:**
```html
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GCL42G0L6D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GCL42G0L6D');
</script>
```

**Uruchomienie:**
```bash
python3 add_analytics.py
```

**Wynik:**
- ‚úÖ 77 plik√≥w HTML zaktualizowanych
- ‚úÖ Wszystkie podstrony majƒÖ teraz tracking
- ‚úÖ Zmiany wrzucone na serwer FTP przez `deploy.sh`

**Deployment:**
```bash
bash deploy.sh
```

---

## üö® KRYTYCZNY PROBLEM - KATALOG `pages/__DIR__/` (22.10.2025)

### ‚ùå Problem: Deploy usunƒÖ≈Ç dane klienta z serwera

**Co siƒô sta≈Ço:**
- Skrypt `deploy.sh` u≈ºywa `mirror --reverse --delete`
- Katalog `pages/__DIR__/data/` z JSONami **nie istnia≈Ç lokalnie**
- Podczas deploymentu katalog zosta≈Ç **usuniƒôty z serwera FTP**
- **Utracono dane wprowadzone przez klienta** (36 plik√≥w JSON z konfiguracjƒÖ podstron)

**Output z deploymentu:**
```
Removing old directory `pages/__DIR__'
```

### ‚úÖ RozwiƒÖzanie

#### 1. Przywr√≥cenie katalogu z kopii zapasowej
```bash
cp -r "kopia 251021/pages/__DIR__" pages/
```

**Przywr√≥cono:**
- 36 plik√≥w JSON z danymi podstron
- Katalog `pages/__DIR__/data/` z konfiguracjƒÖ hotspot√≥w

#### 2. Naprawa `deploy.sh` - dwukierunkowa synchronizacja

**Nowy mechanizm deploymentu:**

**Krok 1: Pobierz dane klienta z serwera**
```bash
# Pobierz katalog pages/__DIR__/ z serwera (dane klienta)
lftp -c "
set ftp:ssl-allow no
open -u $FTP_USER,$FTP_PASS $FTP_HOST
lcd $LOCAL_DIR
cd $REMOTE_DIR
mirror --verbose pages/__DIR__/ pages/__DIR__/
bye
"
```

**Krok 2: Wy≈õlij pliki na serwer (z wykluczeniem danych klienta)**
```bash
# Wy≈õlij pliki na serwer (z wykluczeniem pages/__DIR__/)
lftp -c "
set ftp:ssl-allow no
open -u $FTP_USER,$FTP_PASS $FTP_HOST
lcd $LOCAL_DIR
cd $REMOTE_DIR
mirror --reverse --delete --verbose \
  --exclude .git/ \
  --exclude .DS_Store \
  --exclude deploy.sh \
  --exclude .gitignore \
  --exclude README.md \
  --exclude-glob *.py \
  --exclude-glob *.md \
  --exclude pages/__DIR__/
bye
"
```

**Efekt:**
- ‚úÖ **Przed ka≈ºdym deploymentem** pobiera aktualne dane klienta z serwera
- ‚úÖ Lokalnie zawsze masz najnowsze JSONy wprowadzone przez klienta
- ‚úÖ Upload **nie nadpisuje** katalogu `pages/__DIR__/` na serwerze
- ‚úÖ Dane klienta sƒÖ bezpieczne i zawsze zsynchronizowane
- ‚úÖ Pliki Python i Markdown nie sƒÖ wysy≈Çane na serwer

### ‚ö†Ô∏è UWAGA

**Je≈õli klient wprowadzi≈Ç nowe dane po 25.10.2021, zosta≈Çy one utracone!**

Nale≈ºy sprawdziƒá na serwerze FTP czy:
1. Katalog `pages/__DIR__/` nadal istnieje
2. Czy zawiera aktualne dane klienta
3. Je≈õli nie - trzeba przywr√≥ciƒá z backupu serwera

### ‚ö†Ô∏è UWAGA - Weryfikacja przed wdro≈ºeniem

**Przed wdro≈ºeniem tej zmiany sprawd≈∫ na serwerze FTP:**
1. Czy katalog `pages/__DIR__/` istnieje
2. Czy zawiera pliki JSON z danymi klienta
3. Je≈õli tak - **KONIECZNIE zr√≥b backup** przed pierwszym deploymentem

**Backup danych:**
```bash
# Pobierz backup danych z serwera (spakuje do ZIP)
./backup_data.sh

# Utworzy plik: backup_pages_data_YYYYMMDD_HHMMSS.zip
```

### üìù Zalecenia na przysz≈Ço≈õƒá

1. **Zawsze** dodawaj katalogi z danymi klienta do `--exclude` w deploy.sh
2. **Nigdy** nie u≈ºywaj `--delete` bez dok≈Çadnej weryfikacji co zostanie usuniƒôte
3. Rozwa≈º u≈ºycie `--dry-run` przed w≈Ça≈õciwym deploymentem:
   ```bash
   mirror --reverse --delete --dry-run --verbose
   ```
4. **Regularnie commituj `pages/__DIR__/` do GitHuba jako backup:**
   ```bash
   ./deploy.sh              # Pobierze dane z serwera
   git add pages/__DIR__/   # Dodaj JSONy do commita
   git commit -m "Backup danych klienta $(date +%Y-%m-%d)"
   git push                 # Wy≈õlij na GitHuba
   ```
5. Po ka≈ºdym deploymencie sprawd≈∫ czy dane zosta≈Çy pobrane: `ls -la pages/__DIR__/`

### üîç Jak sprawdziƒá czy dane sƒÖ bezpieczne

**Test przed deploymentem:**
```bash
# Sprawd≈∫ co zostanie usuniƒôte (dry-run)
lftp -c "
set ftp:ssl-allow no
open -u konrad@beirutbar.pl,5147raRA!@#$ beirut.home.pl
lcd /Users/konradmakosa/Documents/galkowski/menu\ www/beirutbar.pl
cd /beirutbar
mirror --reverse --delete --dry-run --verbose
bye
"
```

**Szukaj w output:**
- ‚ùå `Removing directory pages/__DIR__` - NIEBEZPIECZNE!
- ‚ùå `Removing file pages/__DIR__/*.json` - NIEBEZPIECZNE!
- ‚úÖ Brak komunikat√≥w o usuwaniu `pages/__DIR__/` - OK

### ‚úÖ Wdro≈ºone zmiany (22.10.2025)

#### 1. **deploy.sh** - Dwukierunkowa synchronizacja
- ‚úÖ Dodano KROK 1: Pobieranie `pages/__DIR__/` z serwera przed deploymentem
- ‚úÖ Dodano KROK 2: Upload z wykluczeniem `--exclude pages/__DIR__/`
- ‚úÖ Dodano wykluczenie plik√≥w `*.py` i `*.md` z uploadu
- ‚úÖ Dodano komunikaty o postƒôpie deploymentu
- ‚úÖ Dane klienta sƒÖ teraz chronione przed usuniƒôciem

#### 2. **backup_data.sh** - Backup danych klienta
- ‚úÖ Utworzono skrypt do pobierania backupu danych z serwera
- ‚úÖ Automatyczne pakowanie do ZIP: `backup_pages_data_YYYYMMDD_HHMMSS.zip`
- ‚úÖ Raport z liczby plik√≥w i rozmiaru archiwum
- ‚úÖ Automatyczne usuwanie katalogu tymczasowego
- ‚úÖ Obs≈Çuga sytuacji gdy `pages/__DIR__/` nie istnieje na serwerze

#### 2b. **backup_full.sh** - Pe≈Çny backup serwisu
- ‚úÖ Utworzono skrypt do pe≈Çnego backupu ca≈Çego serwisu
- ‚úÖ Pobiera wszystkie pliki: HTML, CSS, JS, obrazki, PHP, dane
- ‚úÖ Pakowanie do ZIP: `backup_full_beirutbar_YYYYMMDD_HHMMSS.zip`
- ‚úÖ Raport z liczby plik√≥w i rozmiaru archiwum

#### 3. **.gitignore** - Backup danych na GitHubie
- ‚úÖ Katalog `pages/__DIR__/` **NIE jest wykluczony** z gita
- ‚úÖ Pliki JSON bƒôdƒÖ commitowane jako backup
- ‚úÖ GitHub s≈Çu≈ºy jako dodatkowe zabezpieczenie danych klienta
- ‚úÖ Dodano wykluczenie lokalnych backup√≥w ZIP: `backup_pages_data_*.zip`, `backup_full_beirutbar_*.zip`

#### 4. **README.md** - Dokumentacja deploymentu
- ‚úÖ Dodano sekcjƒô o bezpiecznym deploymencie
- ‚úÖ Instrukcje u≈ºycia `deploy.sh`, `backup_data.sh` i `backup_full.sh`
- ‚úÖ Wyja≈õnienie r√≥≈ºnic miƒôdzy backupami (dane vs. pe≈Çny)
- ‚úÖ Wyja≈õnienie struktury danych klienta
- ‚úÖ Przyk≈Çad dry-run przed deploymentem

### üìä Podsumowanie zabezpiecze≈Ñ

**Przed zmianami:**
- ‚ùå Deploy m√≥g≈Ç usunƒÖƒá `pages/__DIR__/` z serwera
- ‚ùå Brak backupu danych klienta
- ‚ùå Brak dokumentacji o ryzyku

**Po zmianach:**
- ‚úÖ Deploy pobiera dane przed uploadem
- ‚úÖ Deploy nie nadpisuje `pages/__DIR__/`
- ‚úÖ Skrypt do ≈Çatwego backupu
- ‚úÖ Pe≈Çna dokumentacja w README
- ‚úÖ Dane klienta backupowane na GitHubie

---

## ü§ñ SKRYPTY DO URUCHOMIENIA

### 1. **fix_image_flash.py** (ju≈º istnieje w projekcie)
Naprawia miganie zaslepki w plikach HTML

```bash
python3 fix_image_flash.py
```

**Co robi:**
- Dodaje `style="opacity: 0;"` do `<img id="dishImage">`
- Dodaje `dishImage.onload` kt√≥ry pokazuje obrazek po za≈Çadowaniu
- Dodaje `transition: opacity 0.3s` w CSS
- Modyfikuje **wszystkie pliki HTML** w folderze `pages/`

---

### 2. **fix_mobile_viewport.py** (ju≈º istnieje w projekcie)
Naprawia viewport na mobile (ale NIE U≈ªYWAJ GO - zmiany CSS lepiej zrobiƒá rƒôcznie)

---

## üìã INSTRUKCJA DLA DRUGIEGO PROJEKTU

### Krok 1: Skopiuj skrypty
```bash
cp fix_image_flash.py /≈õcie≈ºka/do/drugiego/projektu/
```

### Krok 2: Zmiany rƒôczne w CSS
Otw√≥rz `css/style.css` i zastosuj zmiany z sekcji **"ZMIANY RƒòCZNE"** punkt 1 (A-G)

### Krok 3: Zmiany w JavaScript
Otw√≥rz `js/main_simple.js` i dodaj kod z sekcji **"ZMIANY RƒòCZNE"** punkt 2 NA POCZƒÑTKU pliku

### Krok 4: Uruchom skrypt dla stron HTML
```bash
cd /≈õcie≈ºka/do/drugiego/projektu/
python3 fix_image_flash.py
```

### Krok 5: Opcjonalnie - zaktualizuj save_pages.py i hotspot-editor
Je≈õli u≈ºywasz tych plik√≥w, zastosuj zmiany z punkt√≥w 4 i 5

---

## ‚úÖ WERYFIKACJA

### Sprawd≈∫ na telefonie (Firefox Mobile):
1. ‚ùå Brak bia≈Çej przerwy pod banerem
2. ‚ùå Menu nie jest przesuniƒôte w g√≥rƒô
3. ‚ùå Brak migania zaslepki na stronach da≈Ñ

### Sprawd≈∫ w Eruda Console (opcjonalnie):
```javascript
// Powinno pokazaƒá wysoko≈õƒá ~75px (nie ~90px)
document.querySelector('.ad-banner').offsetHeight

// Powinno pokazaƒá warto≈õƒá np. "5.04px"
getComputedStyle(document.documentElement).getPropertyValue('--vh')
```

---

## üîß TROUBLESHOOTING

### Problem: Nadal bia≈Ça przerwa
- Sprawd≈∫ czy CSS ma `height: calc(var(--vh) * 15)` jako OSTATNIƒÑ warto≈õƒá
- Sprawd≈∫ czy JavaScript siƒô wykonuje (console.log w Eruda)
- Wyczy≈õƒá cache przeglƒÖdarki (Ctrl+Shift+R)

### Problem: Skrypt nie dzia≈Ça
- Sprawd≈∫ czy jeste≈õ w katalogu projektu
- Sprawd≈∫ czy folder `pages/` istnieje
- Sprawd≈∫ uprawnienia: `chmod +x fix_image_flash.py`

---

**Data utworzenia:** 22.10.2025  
**Autor zmian:** Cascade AI + Konrad  
**Projekt:** Beirut Bar Menu

---

## ‚úÖ WERYFIKACJA BACKUP√ìW (22.10.2025 11:24)

### Test backup_data.sh
```bash
./backup_data.sh
```

**Wynik:**
- ‚úÖ Pobrano **37 plik√≥w JSON** z `pages/__DIR__/data/`
- ‚úÖ Utworzono archiwum: `backup_pages_data_20251022_112455.zip` (16M)
- ‚úÖ Wszystkie dane klienta zabezpieczone

### Test backup_full.sh
```bash
./backup_full.sh
```

**Wynik:**
- ‚úÖ Pobrano **285 plik√≥w** z ca≈Çego serwisu (67M)
- ‚úÖ Utworzono archiwum: `backup_full_beirutbar_20251022_112507.zip` (53M)
- ‚úÖ Zawiera: HTML, CSS, JS, obrazki, PHP, dane klienta

### Potwierdzenie struktury na serwerze FTP:
```
/beirutbar/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ __DIR__/          ‚Üê Dos≈Çownie katalog "__DIR__"
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data/         ‚Üê 37 plik√≥w JSON z danymi klienta
‚îÇ   ‚îú‚îÄ‚îÄ *.html            ‚Üê 100+ stron HTML
‚îÇ   ‚îú‚îÄ‚îÄ save.php
‚îÇ   ‚îî‚îÄ‚îÄ load.php
‚îú‚îÄ‚îÄ css/
‚îú‚îÄ‚îÄ js/
‚îî‚îÄ‚îÄ images/
```

**Wszystkie skrypty dzia≈ÇajƒÖ poprawnie!** ‚úÖ

---

## üîß OPTYMALIZACJA GOOGLE ANALYTICS (22.10.2025 13:45)

### Problem: GA nie ≈õledzi≈Ça pojedynczych da≈Ñ
- Podstrony otwierajƒÖ siƒô w modalu bez zmiany URL
- GA widzia≈Ça tylko `index.html`, nie poszczeg√≥lne dania
- Brak danych o popularno≈õci konkretnych pozycji menu

### RozwiƒÖzanie:

#### 1. **Poprawa tytu≈Ç√≥w** (77 plik√≥w)
```bash
python3 fix_titles.py
```
- ‚úÖ Zmieniono `<title>Kraken Bar` na `<title>Beirut Bar` we wszystkich plikach w `/pages`

#### 2. **Usuniƒôcie duplikat√≥w GA z podstron**
```bash
python3 remove_ga_from_pages.py
```
- ‚úÖ Usuniƒôto kod GA z 77 plik√≥w HTML w `/pages`
- ‚úÖ GA pozosta≈Ça tylko w `index.html` (jeden punkt ≈õledzenia)

#### 3. **Dodanie ≈õledzenia event√≥w w JavaScript**

**Plik:** `js/main_simple.js` (funkcja `openPageModal`)

```javascript
// Google Analytics - ≈õledzenie otwarcia podstrony
if (typeof gtag !== 'undefined') {
    const pageName = pageUrl.replace('pages/', '').replace('.html', '');
    const pageTitle = pageName.split('-').map(word => 
        word.charAt(0).toUpperCase() + word.slice(1)
    ).join(' ');
    
    gtag('event', 'page_view', {
        page_title: 'Beirut Bar - ' + pageTitle,
        page_location: window.location.origin + '/' + pageUrl,
        page_path: '/' + pageUrl
    });
}
```

### üìä Co teraz widaƒá w Google Analytics:

**Strona g≈Ç√≥wna:**
- Odwiedziny: `beirutbar.pl/index.html`
- UrzƒÖdzenia, przeglƒÖdarki, lokalizacje

**Pojedyncze dania (jako page_view events):**
- `Beirut Bar - Adana Burger` ‚Üí `/pages/adana-burger.html`
- `Beirut Bar - Hummus Classic` ‚Üí `/pages/hummus-classic.html`
- `Beirut Bar - Falafel Mix` ‚Üí `/pages/falafel-mix.html`
- **77 r√≥≈ºnych da≈Ñ ≈õledzone osobno!**

### üéØ Mo≈ºliwo≈õci analizy:

- ‚úÖ **TOP 10 najpopularniejszych da≈Ñ** üèÜ
- ‚úÖ **Kt√≥re dania nikt nie klika** (kandydaci do usuniƒôcia)
- ‚úÖ **≈öcie≈ºki u≈ºytkownik√≥w** - co oglƒÖdajƒÖ po kolei
- ‚úÖ **Czas spƒôdzony na przeglƒÖdaniu menu**
- ‚úÖ **Por√≥wnanie popularno≈õci kategorii** (jedzenie vs. drinki)

### üìà Gdzie znale≈∫ƒá w GA:
`Events` ‚Üí `page_view` ‚Üí filtruj po `page_path` zawierajƒÖcym `/pages/`

**Commit:** `7c1c9fd` - Poprawa tytu≈Ç√≥w i optymalizacja Google Analytics

---

## ‚ö° OPTYMALIZACJA DEPLOY.SH (22.10.2025 13:52)

### Problem: Niepotrzebne transfery plik√≥w
Deploy wysy≈Ça≈Ç pliki na FTP nawet je≈õli siƒô nie zmieni≈Çy:
```
Removing old file `data/hotspots_food.json'
Transferring file `data/hotspots_food.json'
```

**Przyczyna:** `mirror --reverse` domy≈õlnie por√≥wnuje tylko daty modyfikacji, nie zawarto≈õƒá plik√≥w.

### RozwiƒÖzanie:

**Plik:** `deploy.sh` (linia 32)

**BY≈ÅO:**
```bash
mirror --reverse --delete --verbose \
```

**JEST:**
```bash
mirror --reverse --delete --verbose --only-newer \
```

### ‚úÖ Efekt:

Flaga `--only-newer` sprawdza:
- ‚úÖ Datƒô modyfikacji
- ‚úÖ Rozmiar pliku
- ‚úÖ Pomija transfer je≈õli plik jest identyczny

**Nastƒôpny deploy bƒôdzie szybszy** - tylko faktycznie zmienione pliki zostanƒÖ wys≈Çane! üöÄ
